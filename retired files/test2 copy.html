<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Paws On Tour</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Monofett&family=Chicle&family=Tinos&family=Faster+One&family=Roboto&family=Montserrat:wght@600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      :root {
        --primary: #501214;
        --secondary: #6a5638;
        --accent: #d2b650;
        --background: #f8f9fa;
        --text: #2d3748;
        --light: #f4f1ed;
        --navbar-color: var(--primary);
        --nav-button-color: var(--accent);
        --nav-button-color-rgb: 210, 182, 80;
        --navbar-height: 60px;
        --padding-mobile: 1rem;
      }

      [data-theme="high-contrast"] {
        --primary: #400a0c;
        --secondary: #4a3618;
        --accent: #ffd700;
        --background: #1a1a1a;
        --text: #000;
        --light: #333333;
        --navbar-color: #2d0708;
        --nav-button-color: #ffd700;
        --nav-button-color-rgb: 255, 215, 0;
        --card-bg: #2d2d2d;
        --border-color: #4a4a4a;
      }

      body {
        font-family: "Roboto", sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 0;
        background-color: var(--secondary);
        color: var(--text);
        min-height: 100vh;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      .theme-toggle {
        position: fixed;
        top: 10px;
        right: 10px;
        z-index: 1000;
        background-color: var(--primary);
        color: var(--accent);
        border: 2px solid var(--accent);
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
        font-size: 0.9rem;
      }

      .theme-toggle:hover {
        background-color: var(--accent);
        color: var(--primary);
      }

      .navbar {
        width: 100%;
        margin: 0;
        padding: 3rem 0;
        background-color: var(--navbar-color);
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        z-index: 999;
        transition: background-color 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: blur(10px);
        height: var(--navbar-height);
      }

      .letter {
        color: var(--accent);
        text-shadow: 0 0 10px rgba(var(--nav-button-color-rgb), 0.3);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-size: 1.5rem;
        font-weight: 600;
        margin: 0;
        letter-spacing: 0.1em;
        font-family: "Montserrat", sans-serif;
      }

      .letter:hover {
        text-shadow: 0 0 15px rgba(var(--nav-button-color-rgb), 0.5);
        transform: scale(1.05);
      }

      .app-description {
        background-color: var(--light);
        padding: var(--padding-mobile);
        text-align: center;
        border-bottom: 3px solid var(--accent);
      }

      .app-description-content {
        max-width: 800px;
        margin: 0 auto;
      }

      .app-description h2 {
        color: var(--primary);
        font-size: 1.5rem;
        margin-bottom: 1rem;
        font-family: "Montserrat", sans-serif;
      }

      .app-description p {
        color: var(--text);
        font-size: 1rem;
        line-height: 1.6;
        margin: 0;
      }

      .search-sort-container {
        position: sticky;
        top: 0;
        z-index: 1000;
        background-color: var(--secondary);
        padding: var(--padding-mobile);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .search-sort-wrapper {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        max-width: 900px;
        margin: 0 auto;
      }

      .search-sort-wrapper .nav-buttons,
      .view-toggle {
        background: none;
        border: 2px solid var(--accent);
        color: var(--accent);
        padding: 8px 16px;
        border-radius: 4px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-weight: 300;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        position: relative;
        overflow: hidden;
        cursor: pointer;
        width: 100%;
        height: 44px;
      }

      .search-sort-wrapper .nav-buttons:before,
      .view-toggle:before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background-color: var(--nav-button-color);
        transform: translate(-50%, -50%);
        border-radius: 50%;
        transition: width 0.6s ease, height 0.6s ease;
        z-index: -1;
      }

      .search-sort-wrapper .nav-buttons:hover:before,
      .view-toggle:hover:before {
        width: 300px;
        height: 300px;
      }

      .search-sort-wrapper .nav-buttons:hover,
      .view-toggle:hover {
        color: var(--primary);
        transform: translateY(-2px);
      }

      .search-bar {
        flex: 1;
        margin: 0;
      }

      .search-bar input {
        width: 100%;
        padding: 1rem 1.5rem;
        font-size: 1rem;
        border: none;
        border-radius: 8px;
        background: white;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        transition: box-shadow 0.3s ease;
        margin: 0;
        height: 44px;
      }

      .search-bar input:focus {
        outline: none;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
      }

      .sort-bar {
        position: static;
        padding: 0;
        box-shadow: none;
        background: none;
      }

      #sort {
        width: 100%;
        padding: 0.8rem 1.5rem;
        border-radius: 8px;
        border: none;
        background: white;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        height: 44px;
        margin: 0;
        min-width: 150px;
      }

      #sort:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        background-color: #d1b64f;
        color: white;
        transform: translateY(-2px);
      }

      .landmarks-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
        max-width: 1400px;
        margin: 1.5rem auto;
        padding: var(--padding-mobile);
      }

      .landmark {
        position: relative;
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        width: 100%;
        height: 100%;
        min-height: 380px;
      }

      .landmark:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .landmark img {
        width: 100%;
        height: 200px;
        object-fit: cover;
      }

      .landmarks-list {
        max-width: 1200px;
        margin: 1.5rem auto;
        padding: var(--padding-mobile);
      }

      .landmark-list-item {
        background: white;
        border-radius: 12px;
        margin-bottom: 1.5rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        padding: var(--padding-mobile);
        align-items: center;
        position: relative;
      }

      .landmark-list-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .landmark-list-item img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 8px;
      }

      .landmark-list-details {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        padding-right: 1rem;
      }

      .landmark-list-details .location-number {
        position: absolute;
        right: 1rem;
        top: 1rem;
        width: 40px;
        height: 40px;
        font-size: 1.2rem;
      }

      .landmark-list-details p {
        margin: 0;
        font-size: 1rem;
        line-height: 1.6;
        color: #4a5568;
      }

      .landmark-details {
        padding: var(--padding-mobile);
        height: calc(100% - 220px);
        display: flex;
        flex-direction: column;
      }

      .landmark-name {
        font-size: 1.4rem;
        font-weight: 600;
        margin-bottom: 0.25rem;
      }

      .landmark-name a {
        color: var(--primary);
        text-decoration: none;
        transition: color 0.3s ease;
      }

      .landmark-name a:hover {
        color: var(--accent);
      }

      .landmark-location {
        font-size: 1.1rem;
        color: #666;
        margin-bottom: 0.5rem;
      }

      .location-number {
        position: absolute;
        top: 1rem;
        left: 1rem;
        background-color: var(--primary);
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 900;
        font-size: 1.2rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        z-index: 1;
        transition: 0.1s ease;
      }

      .location-number:hover {
        background-color: #d1b64f;
      }

      #map {
        width: 90%;
        max-width: 1200px;
        height: 300px;
        margin: 1rem auto;
        border-radius: 12px;
        border: none;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        transition: transform 0.3s ease;
      }

      .carousel {
        position: relative;
        margin-bottom: 1.5rem;
      }

      .carousel-container {
        position: relative;
        border-radius: 12px;
        overflow: hidden;
      }

      .carousel img {
        width: 100%;
        height: auto;
        transition: opacity 0.3s ease;
      }

      .carousel-button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(80, 18, 20, 0.7);
        color: white;
        border: none;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        font-size: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 2;
      }

      .carousel-button:hover {
        background: rgba(80, 18, 20, 0.9);
      }

      .carousel-button.prev {
        left: 0.5rem;
      }

      .carousel-button.next {
        right: 0.5rem;
      }

      .carousel-caption {
        text-align: center;
        padding: 0.5rem var(--padding-mobile);
        color: var(--text);
        font-style: italic;
        margin-top: 0.5rem;
        display: inline-block;
        width: auto;
        font-size: 0.9rem;
      }

      .carousel-caption span {
        background: rgba(255, 255, 255, 0.9);
        padding: 0.25rem 0.75rem;
        border-radius: 4px;
        line-height: 1.6;
      }

      .carousel-dots {
        display: flex;
        justify-content: center;
        gap: 0.5rem;
        margin-top: 0.5rem;
      }

      .dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: #ccc;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .dot.active {
        background: var(--primary);
        transform: scale(1.2);
      }

      .detail {
        padding: var(--padding-mobile);
        margin: 1rem var(--padding-mobile);
        background: white;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .navigation-buttons {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        margin-top: 1.5rem;
      }

      .nav-button {
        width: 100%;
        height: 44px;
        padding: 0.8rem 1rem;
        background-color: var(--primary);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        font-weight: 500;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .nav-button:hover:not(:disabled) {
        background-color: #631518;
        transform: translateY(-2px);
      }

      .nav-button:disabled {
        background-color: #ccc;
        cursor: not-allowed;
        transform: none;
      }

      .footer {
        text-align: center;
        padding: 20px;
        color: #501214;
      }

      .back-to-top {
        background-color: var(--primary);
        color: white;
        width: 42px;
        height: 42px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        border: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        opacity: 0;
        visibility: hidden;
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
      }

      .back-to-top.visible {
        opacity: 1;
        visibility: visible;
      }

      .back-to-top:hover {
        background-color: #631518;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .back-to-top svg {
        width: 1.2rem;
        height: 1.2rem;
        fill: currentColor;
      }

      /* High Contrast Theme Overrides */
      [data-theme="high-contrast"] body {
        background-color: #000000;
        color: #ffffff;
      }

      [data-theme="high-contrast"] .navbar {
        background-color: #000000;
      }

      [data-theme="high-contrast"] .letter {
        color: #ffff00;
      }

      [data-theme="high-contrast"] h2,
      [data-theme="high-contrast"] .app-description-content h2 {
        color: #fff;
      }

      [data-theme="high-contrast"] .app-description-content p {
        color: #fff;
      }

      [data-theme="high-contrast"] .theme-toggle {
        background-color: #000000;
        color: #ffff00;
        border-color: #ffff00;
      }

      [data-theme="high-contrast"] .theme-toggle:hover {
        background-color: #ffff00;
        color: #000000;
      }

      [data-theme="high-contrast"] .footer h5 {
        color: #fff;
      }

      /* Medium screens and up */
      @media (min-width: 768px) {
        .letter {
          font-size: 2.5rem;
        }

        .search-sort-wrapper {
          flex-direction: row;
        }

        .search-sort-wrapper .nav-buttons,
        .view-toggle {
          width: auto;
        }

        .landmarks-grid {
          grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
          gap: 3rem;
          padding: 0 3rem;
          margin: 3rem auto;
        }

        .landmark-list-item {
          grid-template-columns: 300px 1fr;
          padding: 1rem;
        }

        .landmark-list-details {
          padding-right: 80px;
        }

        .landmark-list-details .location-number {
          right: 1.5rem;
          top: 50%;
          transform: translateY(-50%);
          width: 60px;
          height: 60px;
          font-size: 1.5rem;
        }

        .navigation-buttons {
          flex-direction: row;
          justify-content: space-between;
        }

        .nav-button {
          max-width: 200px;
        }

        #map {
          height: 400px;
          margin: 2rem auto;
        }

        .app-description {
          padding: 2rem;
        }

        .app-description h2 {
          font-size: 1.8rem;
        }

        .app-description p {
          font-size: 1.1rem;
        }

        .carousel-button {
          width: 40px;
          height: 40px;
        }

        .carousel-button.prev {
          left: 1rem;
        }

        .carousel-button.next {
          right: 1rem;
        }

        .detail {
          max-width: 700px;
          margin: 2rem auto;
          padding: 1.5rem;
        }
      }

      /* Large screens */
      @media (min-width: 1024px) {
        .letter {
          font-size: 3rem;
        }

        .landmarks-grid {
          padding: 0 3rem;
        }

        .landmarks-list {
          padding: 0 3rem;
        }
      }

      /* Touch device optimizations */
      @media (hover: none) {
        .landmark:hover,
        .landmark-list-item:hover,
        .nav-button:hover {
          transform: none;
        }

        .search-sort-wrapper .nav-buttons:hover:before,
        .view-toggle:hover:before {
          width: 0;
          height: 0;
        }
      }
    </style>
  </head>

  <body>
    <button
      class="theme-toggle"
      onclick="toggleTheme()"
      aria-label="Toggle high contrast mode"
    >
      Toggle Dark Mode
    </button>

    <nav class="navbar navbar-expand-lg navbar-light position-relative">
      <div class="container-fluid">
        <ul class="navbar-nav w-100 justify-content-center align-items-center">
          <li class="nav-item mx-4">
            <h1 class="letter">PAWS ON TOUR</h1>
          </li>
        </ul>
      </div>
    </nav>

    <div id="app"></div>

    <hr />

    <div class="footer">
      <h5>Current release: 6. Last update: 11/28/24 11:13 a.m.</h5>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-router@3"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // Theme toggle functionality
      function toggleTheme() {
        const body = document.documentElement;
        const currentTheme = body.getAttribute("data-theme");
        const newTheme =
          currentTheme === "high-contrast" ? "default" : "high-contrast";
        body.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
      }

      document.addEventListener("DOMContentLoaded", () => {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme) {
          document.documentElement.setAttribute("data-theme", savedTheme);
        }
      });

      const data = [
        {
          name: "Harris Dining Hall",
          location: "West Campus",
          desc: "Texas State's biggest dining hall. Harris offers breakfast, lunch and dinner, with multiple buffet lines open all featuring different cuisine.",
          directiontonext:
            "GLADE AMPHITHEATER. To get there: Exit Harris and head south along the path. The amphitheater will be visible on your right. Approx walk time: 3 mins.",
          images: [{ url: "img/harris.jpg", caption: "Main eating area" }],
          order: 1,
          lat: 29.8881,
          lon: -97.95118,
        },
        {
          name: "Glade Amphitheater",
          location: "West Campus",
          desc: "Now abandoned (and occasionally used), this amphitheater was once home to band practices and outdoor theatrical performances. Check out the hidden treehouse, too!",
          directiontonext:
            "STUDENT REC CENTER. To get there: Head back up towards Harris and continue east to the Student Rec Center. Approx walk time: 5 mins.",
          images: [
            { url: "img/gladeone.jpg", caption: "Abandoned parking lot area" },
            { url: "img/gladetwo.jpg", caption: "Abandoned tree house" },
            { url: "img/gladethree.jpg", caption: "Old seating section" },
            { url: "img/gladefour.jpg", caption: "Abandoned amphitheater" },
          ],
          order: 2,
          lat: 29.88652,
          lon: -97.95006,
        },
        {
          name: "Student Rec Center",
          location: "West Campus",
          desc: "Featuring four indoor basketball/volleyball courts, an indoor 1/4 mile track, and more machines and squat racks than you can imagine, the Student Rec Center is where a lot of TXST students come to workout and unwind after a long day. Swing by Shake Smart on the way out and get a delicious protein shake with Bobcat Bucks!",
          directiontonext:
            "LBJ STUDENT CENTER. To get there: Head east down W Sessom Dr., turn right on N Commanche St., and then left on Student Center Dr. The LBJ Student Center will be on your right. Approx walk time: 10 mins.",
          images: [
            { url: "img/recone.jpg", caption: "Main entrance" },
            { url: "img/rectwo.jpg", caption: "Free weights" },
            {
              url: "img/recthree.jpg",
              caption: "One of four basketball courts",
            },
            { url: "img/recfour.jpg", caption: "Indoor quarter-mile track" },
            { url: "img/recfive.jpg", caption: "Front of Student Rec Center" },
          ],
          order: 3,
          lat: 29.88876,
          lon: -97.95103,
        },
        {
          name: "LBJ Student Center",
          location: "Central Campus",
          desc: "This is the main hub on campus. Most buses drop off/pick up students here, and it is also home to Chick-fil-A, Tu Taco, and even more restaurants! Check out the first floor and see George's, a billiards lounge where students can also socialize and study.",
          directiontonext:
            "THE MALL. To get there: Head through the front entrance of the LBJ Student Center, go down the stairs to the second floor, and then walk straight out the back doors. Go down the steps, and you'll arrive at The Mall. Approx walk time: 1 min.",
          images: [
            { url: "img/lbjone.jpg", caption: "Main entrance, second floor" },
            { url: "img/lbjtwo.jpg", caption: "Main entrance, second floor" },
            { url: "img/lbjthree.jpg", caption: "Dining area, second floor" },
            { url: "img/lbjfour.jpg", caption: "Dining area, first floor" },
            {
              url: "img/lbjfive.jpg",
              caption: "Dining area, first floor outside",
            },
            { url: "img/lbjsix.jpg", caption: "Main entrance, first floor" },
          ],
          order: 4,
          lat: 29.8893,
          lon: -97.94399,
        },
        {
          name: "The Mall",
          location: "Central Campus",
          desc: "Located by LBJ Student Center and the center of campus, you'll most likely walk through this area every day. Here you'll often see farmers markets or fraternities/sororities hosting events.",
          directiontonext:
            "ALKEK LIBRARY. To get there: From The Mall, head down the stairs and turn left towards Alkek Library. Approx walk time: 2 mins.",
          images: [
            {
              url: "img/mallone.jpg",
              caption: "The Mall, facing away from LBJ SC",
            },
            {
              url: "img/malltwo.jpg",
              caption: "The Mall, facing towards LBJ SC",
            },
          ],
          order: 5,
          lat: 29.88872,
          lon: -97.94398,
        },
        {
          name: "Alkek Library",
          location: "Central Campus",
          desc: "Home to the Wittliff Collections and study resources.",
          directiontonext:
            "JONES DINING HALL. To get there: Exit Alkek and head south towards Jones Dining Hall. Approx walk time: 2 mins.",
          images: [
            { url: "img/alkekone.jpg", caption: "Alkek Library - front" },
            { url: "img/alkektwo.jpg", caption: "Alkek Library - back" },
            { url: "img/alkekthree.jpg", caption: "Alkek One, - Makerspace" },
            {
              url: "img/alkekfour.jpg",
              caption: "Alkek second floor - Starbucks",
            },
            { url: "img/alkekfive.jpg", caption: "Alkek, second floor" },
            { url: "img/alkeksix.jpg", caption: "The Witliff Collections" },
          ],
          order: 6,
          lat: 29.88878,
          lon: -97.94314,
        },
        {
          name: "Jones Dining Hall",
          location: "South-Central Campus",
          desc: "One of TXST's dining halls, featuring six different restaurants to choose from.",
          directiontonext:
            "THE QUAD. To get there: Exit Jones and head north along the main pathway towards The Quad. Approx walk time: 3 mins.",
          images: [
            { url: "img/jonesone.jpg", caption: "Jones Dining Hall - front" },
            { url: "img/jonestwo.jpg", caption: "Front entrance" },
            { url: "img/jonesthree.jpg", caption: "Front side of Jones" },
            { url: "img/jonesfour.jpg", caption: "Back side of Jones" },
            { url: "img/jonesfive.jpg", caption: "Back side of Jones" },
            { url: "img/jonessix.jpg", caption: "Outside seating area" },
          ],
          order: 7,
          lat: 29.88767,
          lon: -97.94314,
        },
        {
          name: "The Quad",
          location: "Central Campus",
          desc: "The busiest hub of student activity on campus.",
          directiontonext:
            "BOBCAT STATUE. To get there: Head northeast through The Quad towards the Bobcat Statue. Approx walk time: 2 mins.",
          images: [
            { url: "img/quadone.jpg", caption: "The Quad - by Alkek Library" },
            { url: "img/quadtwo.jpg", caption: "The Quad - by Old Main" },
          ],
          order: 8,
          lat: 29.88911,
          lon: -97.94142,
        },
        {
          name: "Bobcat Statue",
          location: "North-Central Campus",
          desc: "Famous statue of a bobcat chasing its prey.",
          directiontonext:
            "TMH BUILDING COURTYARD. To get there: Head north towards the TMH Building. Approx walk time: 1 min.",
          images: [{ url: "img/bobcat.jpg", caption: "Bobcat Statue" }],
          order: 9,
          lat: 29.88912,
          lon: -97.94105,
        },
        {
          name: "TMH Building Courtyard",
          location: "North-Central Campus",
          desc: "This courtyard features beautiful terracotta tiles and a serene landscape. This is definitely a beautiful place to study before your exams!",
          directiontonext:
            "LBJ STATUE. To get there: Head east towards the LBJ Statue. Approx walk time: 2 mins.",
          images: [
            { url: "img/tmhone.jpg", caption: "First floor" },
            { url: "img/tmhtwo.jpg", caption: "Second floor" },
          ],
          order: 10,
          lat: 29.88951,
          lon: -97.94161,
        },
        {
          name: "LBJ Statue",
          location: "North-Central Campus",
          desc: "Famous statue of President Lyndon B. Johnson. Traditionally, students shake LBJ's hand before their exams for good luck!",
          directiontonext:
            "OLD MAIN. To get there: Head up the stairs towards Old Main. Approx walk time: 1 min.",
          images: [
            { url: "img/statueone.jpg", caption: "LBJ Statue" },
            {
              url: "img/statuetwo.jpg",
              caption: "Traditional good luck student handshake",
            },
          ],
          order: 11,
          lat: 29.88923,
          lon: -97.94034,
        },
        {
          name: "Old Main",
          location: "Hilltop",
          desc: "The iconic red-roofed building from 1903.",
          directiontonext:
            "COMMONS DINING HALL. To get there: Head down the hill towards Commons Dining Hall. Approx walk time: 3 mins.",
          images: [{ url: "img/oldmain.jpg", caption: "Main entrance" }],
          order: 12,
          lat: 29.88938,
          lon: -97.9389,
        },
        {
          name: "Commons Dining Hall",
          location: "Central Campus",
          desc: "Another one of Texas State's dining halls. Similar to Harris Dining Hall, Commons serves multiple buffet lines daily, all featuring different cuisine.",
          directiontonext:
            "THE DEN. To get there: Head east towards The Den. Approx walk time: 2 mins.",
          images: [
            { url: "img/commonsone.jpg", caption: "Main entrance" },
            { url: "img/commonstwo.jpg", caption: "Inside main entrance" },
            { url: "img/commonsthree.jpg", caption: "Dining area" },
          ],
          order: 13,
          lat: 29.88812,
          lon: -97.94024,
        },
        {
          name: "The Den",
          location: "East Campus",
          desc: "The third and final dining hall at Texas State. This dining hall offers different restaurant's as well as a bubble tea lounge. Upstairs, you can find Einstein Bagels.",
          directiontonext:
            "THE HAMMOCKS. To get there: Head northeast towards the Agriculture building and look for the hidden hammocks. Approx walk time: 5 mins.",
          images: [
            { url: "img/denone.jpg", caption: "Front side of The Den" },
            { url: "img/dentwo.jpg", caption: "Outdoor dining area" },
            { url: "img/denthree.jpg", caption: "Inside front entrance" },
          ],
          order: 14,
          lat: 29.88864,
          lon: -97.93912,
        },
        {
          name: "The Hammocks",
          location: "East Campus",
          desc: "If you can manage to find these hidden hammocks beneath the overgrown vines of the agriculture building, you'll have trouble getting yourself to leave!",
          directiontonext:
            "SEWELL PARK. To get there: Head southeast towards Sewell Park. Approx walk time: 8 mins.",
          images: [
            { url: "img/hammockstwo.jpg", caption: "The Hammocks" },
            { url: "img/hammocksthree.jpg", caption: "The Hammocks" },
            { url: "img/hammocksone.jpg", caption: "Surrounding garden area" },
          ],
          order: 15,
          lat: 29.89049,
          lon: -97.93856,
        },
        {
          name: "Sewell Park",
          location: "Riverfront",
          desc: "A relaxing spot along the San Marcos River.",
          directiontonext:
            "BOBCAT STADIUM. To get there: Head northeast along Aquarena Springs Dr. towards Bobcat Stadium. Approx walk time: 12 mins.",
          images: [{ url: "img/sewell.jpg", caption: "Bikini Hill" }],
          order: 16,
          lat: 29.8887,
          lon: -97.93376,
        },
        {
          name: "Bobcat Stadium",
          location: "North Campus",
          desc: "The heart of athletics at Texas State.",
          directiontonext:
            "THE MEADOWS CENTER. To get there: Head northwest towards The Meadows Center. Approx walk time: 10 mins.",
          images: [{ url: "img/stadium.jpg", caption: "TXST football field" }],
          order: 17,
          lat: 29.89118,
          lon: -97.92556,
        },
        {
          name: "The Meadows Center",
          location: "Riverfront",
          desc: "Located slightly North-East off campus, The Meadows Center offers free information about the local ecosystem and its fragility. Catch a glass-bottom boat tour and see the beautiful San Marcos River in all its glory! Sometimes, you can even see divers cleaning the river's bed during the tours.",
          directiontonext:
            "This concludes the tour! Head back to campus via Aquarena Springs Dr.",
          images: [
            { url: "img/meadow.jpg", caption: "Glass bottom boat tour area" },
          ],
          order: 18,
          lat: 29.89403,
          lon: -97.92976,
        },
      ];

      const Carousel = {
        props: ["images"],
        data() {
          return {
            currentIndex: 0,
          };
        },
        methods: {
          next() {
            this.currentIndex = (this.currentIndex + 1) % this.images.length;
          },
          prev() {
            this.currentIndex =
              (this.currentIndex - 1 + this.images.length) % this.images.length;
          },
        },
        template: `
                    <div class="carousel">
                      <div class="carousel-container">
                        <button class="carousel-button prev" @click="prev" v-if="images.length > 1">&lt;</button>
                        <img :src="images[currentIndex].url" :alt="images[currentIndex].caption">
                        <button class="carousel-button next" @click="next" v-if="images.length > 1">&gt;</button>
                      </div>
                      <div class="carousel-caption" v-if="images[currentIndex].caption">
                        <span>{{ images[currentIndex].caption }}</span>
                      </div>
                      <div class="carousel-dots" v-if="images.length > 1">
                        <span
                          v-for="(_, index) in images"
                          :key="index"
                          :class="['dot', { active: index === currentIndex }]"
                          @click="currentIndex = index"
                        ></span>
                      </div>
                    </div>
                  `,
      };

      const Landmark = {
        props: [
          "name",
          "image",
          "location",
          "desc",
          "directiontonext",
          "order",
          "images",
        ],
        template: `
                    <div class="landmark">
                      <div class="location-number">{{ order }}</div>
                      <router-link :to="'/landmark/' + encodeURIComponent(name)">
                        <img :src="images[0].url" :alt="name" />
                      </router-link>
                      <div class="landmark-details">
                        <div class="landmark-name">
                          <router-link :to="'/landmark/' + encodeURIComponent(name)">{{ name }}</router-link>
                        </div>
                        <div class="landmark-location">{{ location }}</div>
                      </div>
                    </div>
                  `,
      };

      const LandmarkDetail = {
        data() {
          return {
            landmark: null,
            nextLandmark: null,
            prevLandmark: null,
          };
        },
        computed: {
          parsedDirections() {
            if (!this.landmark) return null;
            return parseDirections(this.landmark.directiontonext);
          },
        },
        methods: {
          findAdjacentLandmarks() {
            const currentIndex = data.findIndex(
              (l) => l.name === this.landmark.name
            );
            this.prevLandmark =
              currentIndex > 0 ? data[currentIndex - 1] : null;
            this.nextLandmark =
              currentIndex < data.length - 1 ? data[currentIndex + 1] : null;
          },
          navigateToLandmark(landmark) {
            if (landmark) {
              this.$router.push(
                `/landmark/${encodeURIComponent(landmark.name)}`
              );
            }
          },
          handleSwipe() {
            let touchstartX = 0;
            let touchendX = 0;

            const slider = this.$el;

            slider.addEventListener("touchstart", (e) => {
              touchstartX = e.changedTouches[0].screenX;
            });

            slider.addEventListener("touchend", (e) => {
              touchendX = e.changedTouches[0].screenX;
              if (touchendX < touchstartX) this.next();
              if (touchendX > touchstartX) this.prev();
            });
          },
        },
        components: {
          Carousel,
        },
        created() {
          const name = decodeURIComponent(this.$route.params.name);
          this.landmark = data.find((l) => l.name === name);
          if (this.landmark) {
            this.findAdjacentLandmarks();
          }
        },
        watch: {
          $route(to, from) {
            const name = decodeURIComponent(to.params.name);
            this.landmark = data.find((l) => l.name === name);
            if (this.landmark) {
              this.findAdjacentLandmarks();
            }
          },
        },
        template: `
                    <div v-if="landmark" class="detail">
                      <h2>{{ landmark.name }}</h2>
                      <Carousel :images="landmark.images || [{ url: landmark.imageName }]" />
                      <p><strong>Location:</strong> {{ landmark.location }}</p>
                      <p>{{ landmark.desc }}</p>
                      <div class="directions" v-if="parsedDirections">
                        <div class="destination">{{ parsedDirections.destination }}</div>
                        <ul>
                          <li v-for="step in parsedDirections.steps" :key="step">{{ step }}</li>
                        </ul>
                        <div class="walk-time" v-if="parsedDirections.walkTime">
                          Approximate walk time: {{ parsedDirections.walkTime }}
                        </div>
                      </div>
                      <div class="navigation-buttons">
                        <button class="nav-button" @click="navigateToLandmark(prevLandmark)" :disabled="!prevLandmark">
                          Previous Location
                        </button>
                        <router-link to="/" class="nav-button">Back to List</router-link>
                        <button class="nav-button" @click="navigateToLandmark(nextLandmark)" :disabled="!nextLandmark">
                          Next Location
                        </button>
                      </div>
                    </div>
                    <div v-else class="detail">
                      Landmark not found
                    </div>
                  `,
      };

      const LandmarkList = {
        data() {
          return {
            searchQuery: "",
            sortCriteria: "order",
            landmarks: data,
            showBackToTop: false,
            viewMode: "grid",
          };
        },
        computed: {
          filteredLandmarks() {
            return this.landmarks
              .filter(
                (landmark) =>
                  landmark.name
                    .toLowerCase()
                    .includes(this.searchQuery.toLowerCase()) ||
                  landmark.location
                    .toLowerCase()
                    .includes(this.searchQuery.toLowerCase())
              )
              .sort((a, b) => {
                switch (this.sortCriteria) {
                  case "order":
                    return a.order - b.order;
                  case "name":
                    return a.name.localeCompare(b.name);
                  case "location":
                    return a.location.localeCompare(b.location);
                  default:
                    return 0;
                }
              });
          },
        },
        methods: {
          handleScroll() {
            this.showBackToTop = window.scrollY > 500;
          },
          scrollToTop() {
            window.scrollTo({
              top: 0,
              behavior: "smooth",
            });
          },
          scrollToMap() {
            const map = document.getElementById("map");
            map.scrollIntoView({ behavior: "smooth" });
          },
          toggleView() {
            this.viewMode = this.viewMode === "grid" ? "list" : "grid";
          },
          initMap() {
            const sortedLandmarks = this.landmarks.sort(
              (a, b) => a.order - b.order
            );
            const coordinates = sortedLandmarks.map((landmark) => [
              landmark.lat,
              landmark.lon,
            ]);

            const map = L.map("map").setView([29.8885, -97.94], 14);

            L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
              attribution:
                '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
            }).addTo(map);

            const walkingPath = L.polyline(coordinates, {
              color: "#501214",
              weight: 3,
              opacity: 0.8,
              smoothFactor: 1,
            }).addTo(map);

            sortedLandmarks.forEach((landmark) => {
              const customIcon = L.divIcon({
                className: "custom-div-icon",
                html: `<div style="background-color: #501214; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px;">${landmark.order}</div>`,
                iconSize: [24, 24],
                iconAnchor: [12, 12],
              });

              L.marker([landmark.lat, landmark.lon], { icon: customIcon })
                .addTo(map)
                .bindPopup(
                  `<b>${landmark.order}. ${landmark.name}</b><br>${landmark.location}`
                );
            });

            map.fitBounds(walkingPath.getBounds(), { padding: [50, 50] });
          },
        },
        mounted() {
          // Add scroll event listener
          window.addEventListener("scroll", this.handleScroll);

          // Initialize map after DOM is updated
          this.$nextTick(() => {
            this.initMap();
          });

          // Enable lazy loading for images
          if ("loading" in HTMLImageElement.prototype) {
            document.querySelectorAll("img").forEach((img) => {
              img.loading = "lazy";
            });
          }

          // Initialize search input reference
          this.$nextTick(() => {
            const searchInput = document.querySelector(".search-bar input");
            if (searchInput) {
              searchInput.addEventListener("input", this.debouncedSearch);
            }
          });

          // Initialize touch events for swipe on carousel
          const carouselContainer = document.querySelector(
            ".carousel-container"
          );
          if (carouselContainer) {
            let touchstartX = 0;
            let touchendX = 0;

            carouselContainer.addEventListener(
              "touchstart",
              (e) => {
                touchstartX = e.changedTouches[0].screenX;
              },
              { passive: true }
            );

            carouselContainer.addEventListener(
              "touchend",
              (e) => {
                touchendX = e.changedTouches[0].screenX;
                const diffX = touchstartX - touchendX;

                if (Math.abs(diffX) > 50) {
                  // threshold of 50px for swipe
                  if (diffX > 0) {
                    // Swipe left
                    if (this.currentIndex < this.images.length - 1) {
                      this.currentIndex++;
                    }
                  } else {
                    // Swipe right
                    if (this.currentIndex > 0) {
                      this.currentIndex--;
                    }
                  }
                }
              },
              { passive: true }
            );
          }

          // Add resize event listener for responsive adjustments
          window.addEventListener("resize", () => {
            if (this.resizeTimeout) {
              clearTimeout(this.resizeTimeout);
            }
            this.resizeTimeout = setTimeout(() => {
              const map = document.getElementById("map");
              if (map && this.map) {
                this.map.invalidateSize();
              }
            }, 250);
          });

          // Check and apply saved theme
          const savedTheme = localStorage.getItem("theme");
          if (savedTheme) {
            document.documentElement.setAttribute("data-theme", savedTheme);
          }

          // Initialize back to top visibility
          this.handleScroll();
        },
        beforeDestroy() {
          // Remove scroll event listener
          window.removeEventListener("scroll", this.handleScroll);

          // Remove resize event listener
          window.removeEventListener("resize", this.handleResize);

          // Remove search input listener
          const searchInput = document.querySelector(".search-bar input");
          if (searchInput) {
            searchInput.removeEventListener("input", this.debouncedSearch);
          }

          // Clear any existing timeouts
          if (this.resizeTimeout) {
            clearTimeout(this.resizeTimeout);
          }
        },
        components: { Landmark },
        template: `
                    <div>
                      <div class="app-description">
                        <div class="app-description-content">
                          <h2>Discover Texas State University</h2>
                          <p>Welcome to PAWS on Tour! Explore 18 must-visit locations across Texas State's beautiful campus. From historic landmarks to hidden gems, follow our curated walking tour to experience the best of what TXST has to offer. Use the map below to navigate between locations or search for specific spots that interest you.</p>
                        </div>
                      </div>

                      <div class="search-sort-container">
                        <div class="search-sort-wrapper">
                          <div class="search-bar">
                            <input
                              v-model="searchQuery"
                              type="text"
                              placeholder="Search landmarks or locations..."
                            />
                          </div>
                          <div class="sort-bar">
                            <select id="sort" v-model="sortCriteria">
                              <option value="order">Walking Order</option>
                              <option value="name">Alphabetical</option>
                              <option value="location">Location</option>
                            </select>
                          </div>
                          <button class="view-toggle" @click="toggleView">
                            {{ viewMode === 'grid' ? 'List View' : 'Grid View' }}
                          </button>
                          <button class="nav-buttons" @click="scrollToMap">View Tour Map</button>
                        </div>
                      </div>

                      <div v-if="viewMode === 'grid'" class="landmarks-grid">
                        <landmark
                          v-for="landmark in filteredLandmarks"
                          :key="landmark.name"
                          :name="landmark.name"
                          :images="landmark.images"
                          :location="landmark.location"
                          :desc="landmark.desc"
                          :directiontonext="landmark.directiontonext"
                          :order="landmark.order"
                        ></landmark>
                      </div>

                      <div v-else class="landmarks-list">
                        <div v-for="landmark in filteredLandmarks"
                             :key="landmark.name"
                             class="landmark-list-item">
                          <router-link :to="'/landmark/' + encodeURIComponent(landmark.name)">
                            <img :src="landmark.images[0].url" :alt="landmark.name" />
                          </router-link>
                          <div class="landmark-list-details">
                            <div class="location-number">{{ landmark.order }}</div>
                            <div class="landmark-name">
                              <router-link :to="'/landmark/' + encodeURIComponent(landmark.name)">
                                {{ landmark.name }}
                              </router-link>
                            </div>
                            <div class="landmark-location">{{ landmark.location }}</div>
                            <p>{{ landmark.desc }}</p>
                          </div>
                        </div>
                      </div>

                      <div id="map"></div>

                      <button
                        class="back-to-top"
                        :class="{ visible: showBackToTop }"
                        @click="scrollToTop"
                        aria-label="Back to top"
                      >
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                          <path d="M12 4l8 8h-6v8h-4v-8H4z"/>
                        </svg>
                      </button>
                    </div>
                  `,
      };

      function parseDirections(directionString) {
        const [destination, ...rest] =
          directionString.split(". To get there: ");
        const walkTimeMatch = rest.join(". ").match(/Approx walk time: (.+)$/);
        const walkTime = walkTimeMatch ? walkTimeMatch[1] : "";
        const steps = rest
          .join(". ")
          .replace(/Approx walk time: .+$/, "")
          .split(", ")
          .map((step) => step.trim())
          .filter((step) => step);

        return {
          destination: destination,
          steps: steps,
          walkTime: walkTime,
        };
      }

      // Define routes
      const routes = [
        { path: "/", component: LandmarkList },
        { path: "/landmark/:name", component: LandmarkDetail },
      ];

      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // Create router instance
      const router = new VueRouter({ routes });

      // Create Vue instance
      new Vue({
        el: "#app",
        router,
        template: "<router-view></router-view>",
      });
    </script>
  </body>
</html>
